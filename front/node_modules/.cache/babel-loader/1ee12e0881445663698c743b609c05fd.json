{"ast":null,"code":"var _jsxFileName = \"/home/patrick/Desktop/IIPM_Frequencia/Baseado/front/src/Presentation/Screens/Sandbox.Screen.tsx\",\n    _s = $RefreshSig$();\n\nimport { API } from 'Infrastructure/APIS';\nimport MaterialTable from 'material-table';\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Screens() {\n  _s();\n\n  const [frequencia, setFrequencia] = useState(); // a que será renderizada na tabela.\n\n  const [NovaFrequencia, setNovaFrequencia] = useState(); // a quqe será enviada para atualizar no backend\n\n  console.log(NovaFrequencia);\n  console.warn(frequencia);\n  const columns = [{\n    title: \"Nome\",\n    field: \"nome\"\n  }, {\n    title: \"Cargo\",\n    field: \"cargo\"\n  }, {\n    title: \"Matricula\",\n    field: \"matricula\"\n  }, {\n    title: \"Telefone\",\n    field: \"telefone\"\n  }, {\n    title: \"janeiro\",\n    field: \"janeiro\"\n  }, {\n    title: \"fevereiro\",\n    field: \"fevereiro\"\n  }, {\n    title: \"março\",\n    field: \"marco\"\n  }, {\n    title: \"abril\",\n    field: 'abril'\n  }, {\n    title: \"maio\",\n    field: \"maio\"\n  }, {\n    title: \"junho\",\n    field: \"junho\"\n  }, {\n    title: \"julho\",\n    field: \"julho\"\n  }, {\n    title: \"agosto\",\n    field: \"agosto\"\n  }, {\n    title: \"setembro\",\n    field: \"setembro\"\n  }, {\n    title: \"outubro\",\n    field: \"outubro\"\n  }, {\n    title: \"novembro\",\n    field: \"novembro\"\n  }, {\n    title: \"dezembro\",\n    field: \"dezembro\"\n  }];\n  useEffect(() => {\n    (async () => {\n      const {\n        data\n      } = await API.get(\"/servidor/frequencia\");\n      const frequency = data.map((a, key) => {\n        const frequencia = a.frequencia[0];\n        frequencia['idFrequencia'] = frequencia === null || frequencia === void 0 ? void 0 : frequencia.id;\n        (frequencia === null || frequencia === void 0 ? true : delete frequencia.id) && delete frequencia.frequencia;\n        const frequenciaConcatenada = Object.assign(a, frequencia);\n        return frequenciaConcatenada;\n      });\n      setFrequencia(frequency);\n    })();\n  }, [NovaFrequencia]);\n\n  const handleAddUser = async payload => {\n    try {\n      if (payload.janeiro) {\n        alert(\"Não adicione informações de presença ao criar usuário!\");\n        throw Error();\n      }\n\n      const {\n        data\n      } = await API.post('/servidor', payload);\n      setNovaFrequencia(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDeleteUser = async payload => {\n    console.log(payload);\n\n    try {\n      const {\n        data\n      } = await API.delete(`/servidor/${payload.id}`);\n      setNovaFrequencia(data);\n      window.location.reload();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleUpdateUser = async payload => {\n    const servidor = {\n      nome: payload.nome,\n      telefone: payload.telefone,\n      matricula: payload.matricula,\n      rg: payload.rg,\n      endereco: payload.endereco,\n      cargo: payload.cargo,\n      data_de_nascimento: payload.data_de_nascimento,\n      tipoDoServidor: payload.tipoDoServidor\n    };\n    const frequencia = {\n      janeiro: payload.janeiro,\n      fevereiro: payload.fevereiro,\n      marco: payload.marco,\n      abril: payload.abril,\n      maio: payload.maio,\n      junho: payload.junho,\n      julho: payload.julho,\n      setembro: payload.setembro,\n      outubro: payload.outubro,\n      novembro: payload.novembro,\n      dezembro: payload.dezembro\n    };\n    console.log(payload);\n\n    try {\n      const {\n        data\n      } = await API.patch(`/servidor/${payload.id}`, servidor);\n      const {\n        data: updateFrequencia\n      } = await API.patch(`/frequencia/${payload.idFrequencia}`, frequencia);\n      console.log(updateFrequencia);\n      setNovaFrequencia(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(MaterialTable, {\n      data: frequencia,\n      columns: columns,\n      editable: {\n        onRowAdd: handleAddUser,\n        onRowDelete: handleDeleteUser,\n        onRowUpdate: handleUpdateUser\n      },\n      options: {\n        actionsColumnIndex: -1,\n        addRowPosition: \"first\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Screens, \"dl5FUZe1l9aNGqd9tvU9uXLO0q0=\");\n\n_c = Screens;\nexport default Screens;\n\nvar _c;\n\n$RefreshReg$(_c, \"Screens\");","map":{"version":3,"sources":["/home/patrick/Desktop/IIPM_Frequencia/Baseado/front/src/Presentation/Screens/Sandbox.Screen.tsx"],"names":["API","MaterialTable","React","useEffect","useState","Screens","frequencia","setFrequencia","NovaFrequencia","setNovaFrequencia","console","log","warn","columns","title","field","data","get","frequency","map","a","key","id","frequenciaConcatenada","Object","assign","handleAddUser","payload","janeiro","alert","Error","post","error","handleDeleteUser","delete","window","location","reload","handleUpdateUser","servidor","nome","telefone","matricula","rg","endereco","cargo","data_de_nascimento","tipoDoServidor","fevereiro","marco","abril","maio","junho","julho","setembro","outubro","novembro","dezembro","patch","updateFrequencia","idFrequencia","onRowAdd","onRowDelete","onRowUpdate","actionsColumnIndex","addRowPosition"],"mappings":"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","sourcesContent":["import { API } from 'Infrastructure/APIS';\nimport MaterialTable from 'material-table';\nimport React, { useEffect, useState } from 'react';\n\n\nfunction Screens() {\n  const [frequencia, setFrequencia]: any = useState(); // a que será renderizada na tabela.\n  const [NovaFrequencia, setNovaFrequencia]: any = useState() // a quqe será enviada para atualizar no backend\n  console.log(NovaFrequencia)\n  console.warn(frequencia)\n\n\n  const columns: any = [\n    { title: \"Nome\", field: \"nome\", },\n    { title: \"Cargo\", field: \"cargo\" },\n    { title: \"Matricula\", field: \"matricula\" },\n    { title: \"Telefone\", field: \"telefone\" },\n    { title: \"janeiro\", field: \"janeiro\" },\n    { title: \"fevereiro\", field: \"fevereiro\" },\n    { title: \"março\", field: \"marco\" },\n    { title: \"abril\", field: 'abril', },\n    { title: \"maio\", field: \"maio\", },\n    { title: \"junho\", field: \"junho\", },\n    { title: \"julho\", field: \"julho\", },\n    { title: \"agosto\", field: \"agosto\", },\n    { title: \"setembro\", field: \"setembro\", },\n    { title: \"outubro\", field: \"outubro\", },\n    { title: \"novembro\", field: \"novembro\", },\n    { title: \"dezembro\", field: \"dezembro\", },\n  ]\n\n  useEffect(() => {\n    (async () => {\n      const { data } = await API.get(\"/servidor/frequencia\");\n      const frequency = data.map((a: any, key: any) => {\n        const frequencia = a.frequencia[0]\n        frequencia['idFrequencia'] = frequencia?.id\n        delete frequencia?.id && delete frequencia.frequencia\n        const frequenciaConcatenada = Object.assign(a, frequencia)\n        return frequenciaConcatenada\n      })\n      setFrequencia(frequency);\n    })();\n  }, [NovaFrequencia])\n\n  const handleAddUser = async (payload: any) => {\n\n    try {\n      if (payload.janeiro) {\n        alert(\"Não adicione informações de presença ao criar usuário!\")\n        throw Error()\n      }\n      const { data } = await API.post('/servidor', payload)\n      setNovaFrequencia(data)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  const handleDeleteUser = async (payload: any) => {\n    console.log(payload)\n    try {\n      const { data } = await API.delete(`/servidor/${payload.id}`)\n      setNovaFrequencia(data)\n      window.location.reload()\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  const handleUpdateUser = async (payload: any) => {\n\n    const servidor = {\n      nome: payload.nome,\n      telefone: payload.telefone,\n      matricula: payload.matricula,\n      rg: payload.rg,\n      endereco: payload.endereco,\n      cargo: payload.cargo,\n      data_de_nascimento: payload.data_de_nascimento,\n      tipoDoServidor: payload.tipoDoServidor,\n    }\n\n    const frequencia = {\n      janeiro: payload.janeiro,\n      fevereiro: payload.fevereiro,\n      marco: payload.marco,\n      abril: payload.abril,\n      maio: payload.maio,\n      junho: payload.junho,\n      julho: payload.julho,\n      setembro: payload.setembro,\n      outubro: payload.outubro,\n      novembro: payload.novembro,\n      dezembro: payload.dezembro\n    }\n    console.log(payload)\n    try {\n      const { data } = await API.patch(`/servidor/${payload.id}`, servidor)\n      const { data: updateFrequencia } = await API.patch(`/frequencia/${payload.idFrequencia}`, frequencia)\n      console.log(updateFrequencia)\n      setNovaFrequencia(data)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  return (\n    <div>\n      <MaterialTable\n        data={frequencia}\n        columns={columns}\n        editable={{\n          onRowAdd: handleAddUser,\n          onRowDelete: handleDeleteUser,\n          onRowUpdate: handleUpdateUser\n        }}\n        options={{\n          actionsColumnIndex: -1, addRowPosition: \"first\"\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Screens;"]},"metadata":{},"sourceType":"module"}